#N canvas 45 23 1115 716 10;
#X obj 111 509 phasor~, f 27;
#X obj 111 556 *~;
#X obj 126 532 r sampleSize;
#N canvas 0 22 566 427 tabreads 0;
#X obj 90 217 tabread4~ channelL;
#X obj 217 217 tabread4~ channelR;
#X text 205 125 playback;
#X obj 90 239 outlet~;
#X obj 217 239 outlet~;
#X obj 90 175 inlet~, f 14;
#X connect 0 0 3 0;
#X connect 1 0 4 0;
#X connect 5 0 0 0;
#X connect 5 0 1 0;
#X restore 111 611 pd tabreads;
#X obj 132 583 s~ phsrPos;
#X obj 111 409 *, f 7;
#X obj 126 532 r sampleSize;
#X obj 111 485 *, f 21;
#X obj 207 418 t b f;
#X obj 150 358 r sampleFrequency, f 8;
#X obj 111 667 outlet~;
#X obj 174 667 outlet~;
#N canvas 515 65 638 626 phasorSwitch 0;
#X obj 134 169 * 1000;
#X obj 47 335 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 47 246 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 47 276 delay, f 15;
#X obj 194 195 t b f;
#X obj 134 253 /, f 15;
#X obj 134 86 r sampleSize;
#X obj 134 118 / 44100;
#X floatatom 134 140 5 0 0 0 - - -, f 5;
#X text 234 87 total samples;
#X text 233 128 sample total / SR = file length (s);
#X text 294 171 scales a normalised pitch over root;
#X text 240 249 delay length targets sample length & pitch factor;
#X obj 47 157 inlet onset;
#X obj 47 355 outlet phasorStop;
#X obj 194 169 inlet freqRatio;
#X obj 134 221 f;
#X connect 0 0 16 0;
#X connect 1 0 14 0;
#X connect 2 0 3 0;
#X connect 3 0 1 0;
#X connect 4 0 16 0;
#X connect 4 1 5 1;
#X connect 5 0 3 1;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 0 0;
#X connect 13 0 2 0;
#X connect 15 0 4 0;
#X connect 16 0 5 0;
#X restore 270 279 pd phasorSwitch;
#N canvas 895 201 528 545 pitchMath 0;
#X floatatom 147 145 5 0 0 0 - - -, f 5;
#X floatatom 189 145 5 0 0 0 - - -, f 5;
#X obj 147 164 mtof;
#X obj 189 164 mtof;
#X text 247 145 root;
#X text 72 145 PitchIN;
#X obj 147 256 /, f 12;
#X obj 189 186 t b f;
#X floatatom 147 278 5 0 0 0 - - -, f 5;
#X obj 147 74 inlet;
#X obj 65 72 loadbang;
#X msg 65 94 60;
#X obj 147 313 outlet freqRatio;
#X obj 189 74 inlet rootPitch;
#X obj 147 223 f;
#X connect 0 0 2 0;
#X connect 1 0 3 0;
#X connect 2 0 14 0;
#X connect 3 0 7 0;
#X connect 6 0 8 0;
#X connect 7 0 14 0;
#X connect 7 1 6 1;
#X connect 8 0 12 0;
#X connect 9 0 0 0;
#X connect 10 0 11 0;
#X connect 11 0 0 0;
#X connect 11 0 1 0;
#X connect 13 0 1 0;
#X connect 14 0 6 0;
#X restore 270 132 pd pitchMath;
#X msg 111 271 1;
#X floatatom 111 347 5 -2 2 0 - - -, f 5;
#X msg 270 306 0;
#X msg 270 484 0;
#X floatatom 207 221 5 0 0 0 - - -, f 5;
#X obj 430 386 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 191 155 pitch ratio;
#X text 97 220 pRatio mods freq;
#X text 457 386 every onset resets phase;
#X obj 657 460 inlet adsr;
#X obj 411 108 sel 1, f 8;
#X obj 411 160 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 456 160 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 270 63 unpack f f, f 24;
#X text 210 80 note no.;
#X text 481 160 on/off messages [pipe];
#X obj 270 31 inlet note;
#X obj 270 154 t f f, f 15;
#X obj 411 180 t b b b;
#X obj 411 131 del 1;
#X text -69 271 note trigger starts phasor F;
#X obj 623 122 sel 1 0, f 9;
#X obj 625 512 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#N canvas 0 23 954 646 adsr 0;
#X floatatom 494 270 5 0 0 0 - - -, f 5;
#X floatatom 534 270 5 0 0 0 - - -, f 5;
#X floatatom 574 270 5 0 0 0 - - -, f 5;
#X floatatom 614 270 5 0 0 0 - - -, f 5;
#X obj 354 535 line~;
#X obj 473 342 pipe;
#X obj 473 431 pack f f f, f 20;
#X msg 473 463 \$3 \$2;
#X obj 354 153 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 354 414 \$2 \$3;
#X obj 354 98 sel 1;
#X msg 651 458 \$2 \$3;
#X obj 651 436 pack f f f;
#X obj 651 98 sel 0;
#X obj 354 567 *~;
#X obj 494 228 inlet;
#X obj 354 25 inlet;
#X obj 354 589 outlet~;
#X obj 534 228 inlet;
#X obj 574 228 inlet;
#X obj 614 228 inlet;
#X obj 651 147 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 433 123 loadbang;
#X msg 433 345 1;
#X obj 354 381 pack f f f, f 27;
#X msg 679 306 0;
#X obj 679 284 loadbang;
#X obj 614 309 t b f;
#X obj 574 387 spigot;
#X obj 574 339 t b f, f 22;
#X connect 0 0 5 1;
#X connect 0 0 24 2;
#X connect 1 0 6 1;
#X connect 2 0 29 0;
#X connect 3 0 27 0;
#X connect 4 0 14 0;
#X connect 4 0 14 1;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 4 0;
#X connect 8 0 5 0;
#X connect 8 0 24 0;
#X connect 9 0 4 0;
#X connect 10 0 8 0;
#X connect 11 0 4 0;
#X connect 12 0 11 0;
#X connect 13 0 21 0;
#X connect 14 0 17 0;
#X connect 15 0 0 0;
#X connect 16 0 10 0;
#X connect 16 0 13 0;
#X connect 16 0 28 1;
#X connect 18 0 1 0;
#X connect 19 0 2 0;
#X connect 20 0 3 0;
#X connect 21 0 12 0;
#X connect 22 0 23 0;
#X connect 23 0 24 1;
#X connect 24 0 9 0;
#X connect 25 0 12 1;
#X connect 26 0 25 0;
#X connect 27 0 12 0;
#X connect 27 1 12 2;
#X connect 28 0 6 0;
#X connect 29 0 28 0;
#X connect 29 1 6 2;
#X restore 625 548 pd adsr;
#X obj 657 490 unpack f f f f, f 17;
#X text 300 323 delayed OFF stops playback & resets phase;
#X text 368 232 p ratio calcs dly L for phasor;
#X obj 111 643 *~;
#X obj 174 643 *~;
#X obj 111 459 f;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 1 0 4 0;
#X connect 2 0 1 1;
#X connect 3 0 41 0;
#X connect 3 1 42 0;
#X connect 5 0 43 0;
#X connect 7 0 0 0;
#X connect 8 0 43 0;
#X connect 8 1 7 1;
#X connect 9 0 5 1;
#X connect 12 0 16 0;
#X connect 13 0 31 0;
#X connect 14 0 15 0;
#X connect 15 0 5 0;
#X connect 16 0 15 0;
#X connect 16 0 17 0;
#X connect 17 0 0 1;
#X connect 18 0 8 0;
#X connect 19 0 17 0;
#X connect 23 0 38 0;
#X connect 24 0 33 0;
#X connect 24 1 26 0;
#X connect 25 0 32 0;
#X connect 27 0 13 0;
#X connect 27 1 24 0;
#X connect 27 1 35 0;
#X connect 30 0 27 0;
#X connect 31 0 18 0;
#X connect 31 1 12 1;
#X connect 32 0 14 0;
#X connect 32 1 19 0;
#X connect 32 2 12 0;
#X connect 33 0 25 0;
#X connect 35 0 36 0;
#X connect 35 1 36 0;
#X connect 36 0 37 0;
#X connect 37 0 41 1;
#X connect 37 0 42 1;
#X connect 38 0 37 1;
#X connect 38 1 37 2;
#X connect 38 2 37 3;
#X connect 38 3 37 4;
#X connect 41 0 10 0;
#X connect 42 0 11 0;
#X connect 43 0 7 0;
