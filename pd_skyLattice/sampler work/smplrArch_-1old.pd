#N canvas 305 23 769 694 10;
#X obj 111 529 phasor~, f 27;
#X obj 111 576 *~;
#X obj 126 552 r sampleSize;
#N canvas 0 22 566 427 tabreads 0;
#X obj 90 217 tabread4~ channelL;
#X obj 217 217 tabread4~ channelR;
#X text 205 125 playback;
#X obj 90 239 outlet~;
#X obj 217 239 outlet~;
#X obj 90 175 inlet~, f 14;
#X connect 0 0 3 0;
#X connect 1 0 4 0;
#X connect 5 0 0 0;
#X connect 5 0 1 0;
#X restore 111 631 pd tabreads;
#X obj 132 603 s~ phsrPos;
#X obj 111 447 *, f 7;
#X obj 126 552 r sampleSize;
#X obj 111 505 *, f 21;
#X obj 207 458 t b f;
#X obj 150 378 r sampleFrequency, f 8;
#X obj 111 657 outlet~;
#X obj 174 657 outlet~;
#N canvas 773 393 638 626 phasorSwitch 1;
#X obj 134 169 * 1000;
#X obj 47 305 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 47 216 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 47 246 delay, f 15;
#X obj 194 195 t b f;
#X obj 134 223 /, f 15;
#X obj 134 86 r sampleSize;
#X obj 134 118 / 44100;
#X floatatom 134 140 5 0 0 0 - - -, f 5;
#X text 234 87 total samples;
#X text 233 128 sample total / SR = file length (s);
#X text 294 171 scales a normalised pitch over root;
#X text 240 249 delay length targets sample length & pitch factor;
#X obj 47 157 inlet onset;
#X obj 47 325 outlet phasorStop;
#X obj 194 169 inlet freqRatio;
#X connect 0 0 5 0;
#X connect 1 0 14 0;
#X connect 2 0 3 0;
#X connect 3 0 1 0;
#X connect 4 0 5 0;
#X connect 4 1 5 1;
#X connect 5 0 3 1;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 0 0;
#X connect 13 0 2 0;
#X connect 15 0 4 0;
#X restore 387 274 pd phasorSwitch;
#N canvas 895 201 528 545 pitchMath 0;
#X floatatom 147 145 5 0 0 0 - - -, f 5;
#X floatatom 189 145 5 0 0 0 - - -, f 5;
#X obj 147 164 mtof;
#X obj 189 164 mtof;
#X text 247 145 root;
#X text 72 145 PitchIN;
#X obj 147 216 /, f 12;
#X obj 189 186 t b f;
#X floatatom 147 238 5 0 0 0 - - -, f 5;
#X obj 147 74 inlet;
#X obj 65 72 loadbang;
#X msg 65 94 60;
#X obj 147 273 outlet freqRatio;
#X obj 189 74 inlet rootPitch;
#X connect 0 0 2 0;
#X connect 1 0 3 0;
#X connect 2 0 6 0;
#X connect 3 0 7 0;
#X connect 6 0 8 0;
#X connect 7 0 6 0;
#X connect 7 1 6 1;
#X connect 8 0 12 0;
#X connect 9 0 0 0;
#X connect 10 0 11 0;
#X connect 11 0 0 0;
#X connect 11 0 1 0;
#X connect 13 0 1 0;
#X restore 405 178 pd pitchMath;
#X msg 111 271 1;
#X floatatom 111 347 5 -2 2 0 - - -, f 5;
#X msg 387 301 0;
#X msg 270 504 0;
#X floatatom 207 221 5 0 0 0 - - -, f 5;
#X obj 270 348 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 262 174 pitch ratio;
#X text 484 253 p ratio calcs dly L for phasor;
#X text 426 302 delayed OFF stops playback and resets phase;
#X text 173 238 pRatio mods freq;
#X text -71 252 note trigger starts phasor F;
#X text 297 348 every onset resets phase;
#X obj 599 66 inlet adsr;
#X obj 270 88 sel 1;
#X obj 270 110 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 297 110 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 270 13 unpack f f, f 23;
#X text 136 172 onset bang >;
#X text 163 119 note no.;
#X text 323 105 on/off messages [pipe];
#X obj 270 -19 inlet note;
#X obj 405 200 t f f;
#X obj 270 130 t b b b;
#X obj 465 85 print p;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 1 0 4 0;
#X connect 2 0 1 1;
#X connect 3 0 10 0;
#X connect 3 1 11 0;
#X connect 5 0 7 0;
#X connect 7 0 0 0;
#X connect 8 0 7 0;
#X connect 8 1 7 1;
#X connect 9 0 5 1;
#X connect 12 0 16 0;
#X connect 13 0 35 0;
#X connect 14 0 15 0;
#X connect 15 0 5 0;
#X connect 16 0 15 0;
#X connect 16 0 17 0;
#X connect 17 0 0 1;
#X connect 18 0 8 0;
#X connect 19 0 17 0;
#X connect 27 0 28 0;
#X connect 27 1 29 0;
#X connect 28 0 36 0;
#X connect 30 0 13 0;
#X connect 30 1 37 0;
#X connect 30 1 27 0;
#X connect 34 0 30 0;
#X connect 35 0 18 0;
#X connect 35 1 12 1;
#X connect 36 0 14 0;
#X connect 36 1 19 0;
#X connect 36 1 12 0;
#X connect 36 2 13 0;
